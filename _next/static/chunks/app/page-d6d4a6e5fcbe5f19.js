(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5006:function(e,t,n){Promise.resolve().then(n.bind(n,7791))},7791:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(7437),r=n(2265),o=e=>{let{onPoemSubmit:t}=e,[n,o]=(0,r.useState)(""),l=()=>{let e=[{kind:"haiku",poem:"An old silent pond...\nA frog jumps into the pond—\nSplash! Silence again."},{kind:"couplet",poem:"The sun sets in the west,\nAnd birds return to their nest."},{kind:"tanka",poem:"Over the wintry\nforest, winds howl in rage\nwith no leaves to blow.\nThen, the truth emerges clear:\nThere is only you and me."},{kind:"free verse",poem:"The moon whispers secrets\nto the silent sea,\nwaves carry dreams\nto shores unseen."},{kind:"limerick",poem:"There once was a man from Peru,\nWho dreamt he was eating his shoe.\nHe woke with a fright\nIn the middle of the night\nAnd found that his dream had come true."},{kind:"sonnet",poem:"Shall I compare thee to a summer's day?\nThou art more lovely and more temperate:\nRough winds do shake the darling buds of May,\nAnd summer's lease hath all too short a date:\nSometime too hot the eye of heaven shines,\nAnd often is his gold complexion dimm'd;\nAnd every fair from fair sometime declines,\nBy chance or nature's changing course untrimm'd;\nBut thy eternal summer shall not fade\nNor lose possession of that fair thou owest;\nNor shall Death brag thou wanderest in his shade,\nWhen in eternal lines to time thou growest:\nSo long as men can breathe or eyes can see,\nSo long lives this, and this gives life to thee."},{kind:"ballad",poem:"It was many and many a year ago,\nIn a kingdom by the sea,\nThat a maiden there lived whom you may know\nBy the name of Annabel Lee;\nAnd this maiden she lived with no other thought\nThan to love and be loved by me.\nI was a child and she was a child,\nIn this kingdom by the sea;\nBut we loved with a love that was more than love—\nI and my Annabel Lee—\nWith a love that the winged seraphs of heaven\nCoveted her and me."},{kind:"ode",poem:"Ode to a Nightingale\nMy heart aches, and a drowsy numbness pains\nMy sense, as though of hemlock I had drunk,\nOr emptied some dull opiate to the drains\nOne minute past, and Lethe-wards had sunk:\n'Tis not through envy of thy happy lot,\nBut being too happy in thine happiness,—\nThat thou, light-winged Dryad of the trees\nIn some melodious plot\nOf beechen green, and shadows numberless,\nSingest of summer in full-throated ease."}],n=e[Math.floor(Math.random()*e.length)];o(n.poem),t(n.poem),console.log("Random ".concat(n.kind," poem set"))};return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n)},children:[(0,a.jsx)("textarea",{value:n,onChange:e=>o(e.target.value),placeholder:"Roses are red, violets are blue, a poem goes here, and so do you.",className:"w-full p-2 border border-gray-300 rounded",rows:5}),(0,a.jsx)("button",{type:"submit",className:"mt-2 p-2 bg-blue-500 text-white rounded",disabled:!n.trim(),children:"Generate Markov Chain's Transition Matrix"}),(0,a.jsx)("button",{type:"button",className:"mt-2 p-2 ml-2 bg-gray-500 text-white rounded",onClick:()=>l(),children:"Set Random Poem"})]})},l=e=>{let{matrix:t}=e;return(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Markov Transition Matrix"}),(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-xs bg-gray-100 p-4 rounded",children:JSON.stringify(t,null,2)})]})},s=e=>{let{poem:t,onGeneratePoem:n}=e;return(0,a.jsxs)("div",{className:"my-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Generated Poem"}),(0,a.jsx)("p",{className:"whitespace-pre-wrap text-sm",children:t}),(0,a.jsx)("button",{onClick:n,className:"mt-2 p-2 bg-green-500 text-white rounded",children:"Generate Another Poem"})]})};let i=e=>{let t=e.split(/\s+/);console.log("words for markov chain: ".concat(t));let n={};for(let e=0;e<t.length-1;e++){let a=t[e],r=t[e+1];n[a]||(n[a]={}),n[a][r]||(n[a][r]=0),n[a][r]++}return n},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=Object.keys(e),a=n[Math.floor(Math.random()*n.length)],r=a;for(let n=0;n<t-1;n++){console.log(a);let t=e[a];console.log(t);let n=d(t);if(console.log(n),r+=" "+n,!e[a=n])break}return console.log(r),console.log("length: ".concat(r.split(/\s+/).length)),console.log("length (expected): ".concat(t)),r=r.charAt(0).toUpperCase()+r.slice(1)+"."},d=e=>{let t=Object.keys(e),n=Object.values(e),a=Math.random()*n.reduce((e,t)=>e+t,0);for(let e=0;e<t.length;e++)if((a-=n[e])<=0)return t[e];return t[t.length-1]};var c=n(708),m=e=>{let{data:t}=e,n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e,a;let r=(null==n?void 0:null===(a=n.current)||void 0===a?void 0:null===(e=a.parentElement)||void 0===e?void 0:e.clientWidth)||200,o=c.Ys(n.current).attr("viewBox",[0,0,r,600]).attr("height",600);o.selectAll("*").remove();let l=Array.from(new Set([...Object.keys(t),...Object.values(t).flatMap(e=>Object.keys(e))])).map(e=>({id:e})),s=Object.keys(t).flatMap(e=>Object.entries(t[e]).map(t=>{let[n,a]=t;return{source:e,target:n,value:a}})),i=c.A4v(l).force("link",c.Fsl(s).id(e=>e.id).distance(50)).force("charge",c.q5i().strength(-100)).force("center",c.wqt(r/2,300)),h=o.append("g").selectAll("line").data(s).enter().append("line").attr("stroke-width",e=>Math.sqrt(e.value)).attr("stroke","#999"),d=o.append("g").selectAll("circle").data(l).enter().append("circle").attr("r",10).attr("fill","#69b3a2").call(c.ohM().on("start",function(e,t){e.active||i.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",function(e,t){t.fx=e.x,t.fy=e.y}).on("end",function(e,t){e.active||i.alphaTarget(0),t.fx=null,t.fy=null}));d.filter((e,t)=>0===t||t===l.length-1).attr("fill","red");let m=o.append("g").selectAll("text").data(l).enter().append("text").attr("dx",12).attr("dy",".35em").text(e=>e.id||"(end of input poem)");i.nodes(l).on("tick",function(){h.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),d.attr("cx",e=>e.x).attr("cy",e=>e.y),m.attr("x",e=>e.x).attr("y",e=>e.y)}),i.force("link").links(s)},[t]),(0,a.jsx)("svg",{ref:n})},u=e=>{let{matrix:t}=e,n=(0,r.useRef)();return(0,r.useEffect)(()=>{let e=n.current.parentElement.clientWidth-50-30;c.Ys(n.current).selectAll("*").remove();let a=c.Ys(n.current).attr("width",e+50+30).attr("height",600).append("g").attr("transform","translate(".concat(50,",").concat(50,")")),r=Object.keys(t);r.length;let o=c.tiA().range([0,e]).domain(r).padding(.01),l=c.tiA().range([500,0]).domain(r).padding(.01),s=c.BYU().range(["white","blue"]).domain([0,1]);a.append("g").attr("transform","translate(0,".concat(500,")")).call(c.LLu(o)).selectAll("text").attr("transform","rotate(-45)").style("text-anchor","end"),a.append("g").call(c.y4O(l));let i=[];r.forEach((e,n)=>{r.forEach((n,a)=>{i.push({from:e,to:n,value:t[e][n]||0})})}),a.selectAll().data(i,e=>"".concat(e.from,":").concat(e.to)).enter().append("rect").attr("x",e=>o(e.to)).attr("y",e=>l(e.from)).attr("width",o.bandwidth()).attr("height",l.bandwidth()).style("fill",e=>s(e.value)).style("stroke-width",4).style("stroke","none").style("opacity",.8),a.selectAll().data(i,e=>"".concat(e.from,":").concat(e.to)).enter().append("text").attr("x",e=>o(e.to)+o.bandwidth()/2).attr("y",e=>l(e.from)+l.bandwidth()/2).attr("dy",".35em").style("text-anchor","middle").style("fill","black").text(e=>e.value)},[t]),(0,a.jsx)("svg",{ref:n})},p=()=>{let[e,t]=(0,r.useState)({}),[n,d]=(0,r.useState)("");return(0,a.jsxs)("div",{className:"container mx-auto p-4 max-w-2xl flex flex-col min-h-screen",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Poetry Generator"}),(0,a.jsxs)("p",{className:"mb-4",children:["Enter a poem below to generate a new poem using a simple"," ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Markov_chain",className:"text-blue-500",target:"_blank",children:"Markov chain"}),"."]}),(0,a.jsx)(o,{onPoemSubmit:e=>{let n=i(e=e.replace(/[^a-zA-Z\s]/g,"").toLowerCase());t(n),d(h(n))}}),Object.keys(e).length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{matrix:e}),(0,a.jsx)(u,{matrix:e}),(0,a.jsx)(m,{data:e}),(0,a.jsx)(s,{poem:n,onGeneratePoem:()=>{d(h(e))}})]}),(0,a.jsx)("footer",{className:"mt-auto text-center text-sm text-gray-500 border-t pt-4",children:(0,a.jsxs)("p",{children:["Made with ❤️ by"," ",(0,a.jsxs)("a",{href:"https://humbertowoody.xyz",className:"text-blue-500",target:"_blank",children:["Humberto Alcocer"," "]}),"in ",new Date().getFullYear()]})})]})}}},function(e){e.O(0,[708,971,23,744],function(){return e(e.s=5006)}),_N_E=e.O()}]);